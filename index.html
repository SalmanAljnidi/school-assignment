<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù†Ø¸Ø§Ù… Ø¥Ø³Ù†Ø§Ø¯ Ø§Ù„Ø­ØµØµ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Tahomaa;background:#0b1220;color:#fff;margin:0;padding:15px}
h2,h3{margin-top:0}
.card{background:#111a33;padding:15px;border-radius:12px;margin-bottom:15px}
input,select,button{padding:8px;border-radius:8px;border:none;width:100%;margin-top:6px}
button{background:#2a62ff;color:#fff;cursor:pointer}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border-bottom:1px solid #333;padding:6px;text-align:right;font-size:14px}
.small{color:#aaa;font-size:12px}
.badge{background:#243a88;padding:2px 8px;border-radius:10px;font-size:12px}
.warn{background:#8a6d00}
.err{background:#7a0000}
</style>
</head>
<body>

<h2>ğŸ“˜ Ù†Ø¸Ø§Ù… Ø¥Ø³Ù†Ø§Ø¯ Ø§Ù„Ø­ØµØµ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©</h2>

<div class="card">
<h3>1ï¸âƒ£ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø±Ø­Ù„Ø©</h3>
<label><input type="checkbox" value="primary" checked> Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ</label><br>
<label><input type="checkbox" value="middle"> Ù…ØªÙˆØ³Ø·</label><br>
<label><input type="checkbox" value="secondary"> Ø«Ø§Ù†ÙˆÙŠ</label><br><br>
Ø¹Ø¯Ø¯ Ø§Ù„ÙØµÙˆÙ„ Ù„ÙƒÙ„ ØµÙ:
<input id="sections" type="number" value="1" min="1">
</div>

<div class="card">
<h3>2ï¸âƒ£ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</h3>
<input id="tName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…">
<select id="tRank">
<option value="24">Ù…Ù…Ø§Ø±Ø³ (24)</option>
<option value="22">Ù…ØªÙ‚Ø¯Ù… (22)</option>
<option value="18">Ø®Ø¨ÙŠØ± (18)</option>
</select>
<select id="tSpec">
<option>Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
<option>Ø¹Ù„ÙˆÙ…</option>
<option>ÙÙŠØ²ÙŠØ§Ø¡</option>
<option>ÙƒÙŠÙ…ÙŠØ§Ø¡</option>
<option>Ø£Ø­ÙŠØ§Ø¡</option>
<option>Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©</option>
<option>Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
<option>ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</option>
<option>Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</option>
<option>Ø­Ø§Ø³Ø¨</option>
<option>Ø¨Ø¯Ù†ÙŠØ©</option>
<option>ÙÙ†ÙŠØ©</option>
</select>
<button onclick="addTeacher()">â• Ø¥Ø¶Ø§ÙØ©</button>
<div id="teachers"></div>
</div>

<div class="card">
<button onclick="assign()">âš–ï¸ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø³Ù†Ø§Ø¯</button>
</div>

<div class="card">
<h3>ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
<div id="results" class="small">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø³Ù†Ø§Ø¯ Ø¨Ø¹Ø¯</div>
</div>

<div class="small">
ØªÙ†ÙˆÙŠÙ‡: Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø³Ø¨Ø© ØªÙ‚Ø¯ÙŠØ±ÙŠØ© ÙˆØªØ­ØªÙ…Ù„ Ø§Ù„ØµÙˆØ§Ø¨ ÙˆØ§Ù„Ø®Ø·Ø£.<br>
Ø³Ù„Ù…Ø§Ù† Ø§Ù„Ø¬Ù†ÙŠØ¯ÙŠ
</div>

<script>
// ================= Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =================
const WEEKLY = {
primary:{
"1":{"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":7,"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":2,"ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©":4},
"2":{"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":7,"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":2,"ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©":4},
"3":{"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":7,"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":3,"Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©":2},
"4":{"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":6,"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":4,"Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©":3,"Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©":2}
},
middle:{
"1":{"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":4,"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":5,"Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©":4},
"2":{"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":4,"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":5,"Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©":4},
"3":{"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":6,"Ø¹Ù„ÙˆÙ…":4,"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":5,"Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©":4}
},
secondary:{
"1":{"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":5,"ÙÙŠØ²ÙŠØ§Ø¡":2,"ÙƒÙŠÙ…ÙŠØ§Ø¡":2,"Ø£Ø­ÙŠØ§Ø¡":2,"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":4},
"2":{"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":5,"ÙÙŠØ²ÙŠØ§Ø¡":2,"ÙƒÙŠÙ…ÙŠØ§Ø¡":2,"Ø£Ø­ÙŠØ§Ø¡":2,"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":4},
"3":{"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":5,"ÙÙŠØ²ÙŠØ§Ø¡":2,"ÙƒÙŠÙ…ÙŠØ§Ø¡":2,"Ø£Ø­ÙŠØ§Ø¡":2,"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":4}
}
};

const SUBJECT_MAP={
"Ø±ÙŠØ§Ø¶ÙŠØ§Øª":["Ø±ÙŠØ§Ø¶ÙŠØ§Øª"],
"Ø¹Ù„ÙˆÙ…":["Ø¹Ù„ÙˆÙ…","Ø£Ø­ÙŠØ§Ø¡","ÙƒÙŠÙ…ÙŠØ§Ø¡","ÙÙŠØ²ÙŠØ§Ø¡"],
"ÙÙŠØ²ÙŠØ§Ø¡":["ÙÙŠØ²ÙŠØ§Ø¡"],
"ÙƒÙŠÙ…ÙŠØ§Ø¡":["ÙƒÙŠÙ…ÙŠØ§Ø¡"],
"Ø£Ø­ÙŠØ§Ø¡":["Ø£Ø­ÙŠØ§Ø¡"],
"Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©":["Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©"],
"Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©":["Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"],
"ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©":["ØªØ±Ø¨ÙŠØ© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©"],
"Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©":["Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©"],
"Ø­Ø§Ø³Ø¨":["Ø­Ø§Ø³Ø¨"],
"Ø¨Ø¯Ù†ÙŠØ©":["Ø¨Ø¯Ù†ÙŠØ©"],
"ÙÙ†ÙŠØ©":["ÙÙ†ÙŠØ©"]
};

const teachers=[];

// ================= Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† =================
function addTeacher(){
if(!tName.value)return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù…");
teachers.push({
name:tName.value,
limit:+tRank.value,
spec:tSpec.value,
load:0,
details:[]
});
tName.value="";
renderTeachers();
}

function renderTeachers(){
teachers.innerHTML=teachers.map(t=>
`ğŸ‘¤ ${t.name} (${t.spec}) ${t.load}/${t.limit}`
).join("<br>");
}

// ================= Ø§Ù„Ø¥Ø³Ù†Ø§Ø¯ =================
function assign(){
teachers.forEach(t=>{t.load=0;t.details=[]});
const sections=+document.getElementById("sections").value;
let warnings=[];
let units=[];

// ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø­ØµØµ
document.querySelectorAll("input[type=checkbox]:checked").forEach(cb=>{
const stage=cb.value;
Object.keys(WEEKLY[stage]).forEach(grade=>{
Object.entries(WEEKLY[stage][grade]).forEach(([sub,count])=>{
for(let i=0;i<count*sections;i++){
units.push({grade,sub});
}
});
});
});

// Ø§Ù„ØªÙˆØ²ÙŠØ¹
units.forEach(u=>{
let eligible=teachers.filter(t=>SUBJECT_MAP[u.sub].includes(t.spec));
if(!eligible.length) eligible=teachers; // Ø¨Ø¯Ø§Ø¦Ù„
eligible.sort((a,b)=>(a.load/a.limit)-(b.load/b.limit));
const chosen=eligible[0];
chosen.load++;
chosen.details.push(`${u.sub} - ØµÙ ${u.grade}`);
if(!SUBJECT_MAP[u.sub].includes(chosen.spec)){
warnings.push(`Ø§Ø³ØªØ®Ø¯Ù… Ø¨Ø¯ÙŠÙ„: ${chosen.name} Ù„Ù…Ø§Ø¯Ø© ${u.sub}`);
}
});

// Ø§Ù„Ù†ØªØ§Ø¦Ø¬
let html="";
teachers.forEach(t=>{
html+=`<b>${t.name}</b> (${t.load}/${t.limit})<br>`;
t.details.forEach(d=>html+=`â€¢ ${d}<br>`);
html+="<hr>";
});

if(warnings.length){
html+=`<span class="badge warn">ØªÙ†Ø¨ÙŠÙ‡Ø§Øª: ${warnings.length}</span><br>`;
warnings.forEach(w=>html+=`âš ï¸ ${w}<br>`);
}

results.innerHTML=html;
renderTeachers();
}
</script>
</body>
</html>
